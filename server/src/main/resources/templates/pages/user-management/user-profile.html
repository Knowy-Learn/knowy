<!DOCTYPE html>
<html lang="es"
	  layout:decorate="~{layouts/content-sidebar-layout}"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:th="http://www.thymeleaf.org">
<head>
	<script src="/scripts/user-profile.js"></script>

	<link rel="stylesheet" th:href="@{/styles/pages/user-management.css}">
	<title>User profile</title>
</head>

<body>

<aside class="kn-aside user-sidebar" layout:fragment="sidebar">
	<div class="user-info text-center mb-4">
		<h3 class="mt-3 username-title" th:text="${currentNickname}">Usuario</h3>
	</div>
	<div class="sidebar-menu">
		<button class="sidebar-link" data-sidebar-toggler="" th:classappend="active">Editar Perfil</button>
		<a class="sidebar-link" th:href="@{/user-account}">Gesti√≥n de la Cuenta</a>
	</div>
</aside>

<main layout:fragment="main-content">
	<form id="profileForm" method="post" th:action="@{/update-user-profile}">
		<div class="user-management-container_main ">
			<div class="description-card">
				<h1 class="title-management">Editar Perfil</h1>
				<p class="description-management">Configura tus preferencias en cuanto a lenguajes de programaci√≥n,
					editar tu nombre de usuario y tu im√°gen de perfil.
					Recuerda mantener la privacidad de tus datos personales. Cualquier usuario podr√° ver la informaci√≥n
					que introduzcas en esta p√°gina. </p>
			</div>

			<!--messages for username update-->
			<div class="alert alert-danger" th:if="${error}" th:text="${error}"></div>
			<div class="alert alert-success" th:if="${success}" th:text="${success}"></div>

			<div class="row user-information">
				<!--PHOTO-->
				<div class="picture-edit-container col-lg-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
					<img alt="User Avatar" class="edit-avatar" id="profilePicture" src="https://placehold.co/50x50">

					<label class="edit-pic-btn" for= "profile-pic-path">
						<i class="bi bi-person-bounding-box"></i>
					</label>

					<input type="hidden" id="profile-pic-id" name="profilePictureId" class="file-input-overlay">
				</div>

				<div class="information-edit-container col-lg-9" >

					<h6 class="section-title">Nombre de Usuario: üë§</h6>
					<input class="user-name form-control" name="nickname" th:placeholder="${currentNickname}" th:value="*{username}" type="text">
					<br>
					<h6 class="section-title">Lenguajes de Programaci√≥n favoritos ‚≠ê</h6>
					<select class="form-control" id="languages" multiple name="languages">
						<option value="JAVASCRIPT">JavaScript</option>
						<option value="JAVA">Java</option>
						<option value="HTML">HTML</option>
						<option value="CSS">CSS</option>
						<option value="PYTHON">Python</option>
						<option value="PHP">PHP</option>
						<option value="C">#C</option>
						<option value="TYPESCRIPT">TypeScript</option>
						<option value="	RUBY">Ruby</option>
						<option value="SWIFT">Swift</option>
					</select>
					<button class="btn btn-save" id="chooseLanguage" type="button">Escoger lenguaje</button>
					<button class="btn btn-delete" id="removeLanguage" type="button">Eliminar lenguaje</button>
					<div class="mt-2" id="selectedLanguages"></div>

				</div>
			</div>
			<div class="buttons-form-content">
				<button class="btn btn-inferior" type="reset">Restablecer</button>
				<button class="btn btn-save" type="submit">Guardar Cambios</button>
			</div>
		</div>
	</form>
</main>

<div layout:fragment="layout-overlay">
	<!-- Profile Images Modal Selection -->


	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex flex-wrap justify-content-evenly">
					<img src="/images/profile/knowylogo.svg" alt="Avatar 1"
						 class="avatar-selectable rounded-circle img-fluid me-2"
						 width="80" height="80"
						 data-bs-dismiss="modal"
						 data-avatar-src-path="/images/profile/knowylogo.svg"
						 data-avatar-id="1"
					/>
					<img src="/images/profile/knowylogo_red.svg" alt="Avatar 2"
						 class="avatar-selectable rounded-circle img-fluid me-2"
						 width="80" height="80"
						 data-bs-dismiss="modal"
						 data-avatar-src-path="/images/profile/knowylogo_red.svg"
						 data-avatar-id="2"
					/>
					<img src="/images/profile/knowylogo_blue.svg" alt="Avatar 3"
						 class="avatar-selectable rounded-circle img-fluid"
						 width="80" height="80"
						 data-bs-dismiss="modal"
						 data-avatar-src-path="/images/profile/knowylogo_blue.svg"
						 data-avatar-id="3"
					/>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>
